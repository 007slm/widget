define("#widget/0.9.16/daparser",["#jquery/1.7.2/jquery"],function(require,exports){function makeArray(o){var arr=[];for(var i=0,len=o.length;i<len;i++){var node=o[i];node.nodeType===1&&arr.push(node)}return arr}function hasDataAttrs(element){var outerHTML=element.outerHTML;if(outerHTML)return outerHTML.indexOf(" data-")!==-1;var innerHTML=element.innerHTML;if(innerHTML&&innerHTML.indexOf(" data-")!==-1)return!0;var dataset=DAParser.parseElement(element);for(var p in dataset)return!0;return!1}function camelCase(str){return str.toLowerCase().replace(RE_DASH_WORD,function(all,letter){return(letter+"").toUpperCase()})}function uniqueId(){return"daparser-"+idCounter++}var $=require("#jquery/1.7.2/jquery"),ATTR_DA_CID="data-daparser-cid",DAParser=exports;DAParser.parseBlock=function(root){root=$(root)[0];var stringMap={};if(!hasDataAttrs(root))return stringMap;var elements=makeArray(root.getElementsByTagName("*"));elements.unshift(root);for(var i=0,len=elements.length;i<len;i++){var element=elements[i],dataset=DAParser.parseElement(element),cid=element.getAttribute(ATTR_DA_CID);for(var key in dataset){cid||(cid=DAParser.stamp(element));var val=dataset[key],o=stringMap[key]||(stringMap[key]={});o[val]||(o[val]=""),o[val]+=(o[val]?",":"")+"."+cid}}return stringMap},DAParser.parseElement=function(element){element=$(element)[0];if(element.dataset)return $.extend({},element.dataset);var dataset={},attrs=element.attributes;for(var i=0,len=attrs.length;i<len;i++){var attr=attrs[i],name=attr.name;name.indexOf("data-")===0&&(name=camelCase(name.substring(5)),dataset[name]=attr.value)}return dataset},DAParser.stamp=function(element){element=$(element)[0];var cid=element.getAttribute(ATTR_DA_CID);return cid||(cid=uniqueId(),element.setAttribute(ATTR_DA_CID,cid),element.className+=" "+cid),cid};var RE_DASH_WORD=/-([a-z])/g,idCounter=0});